(this["webpackJsonpspotify-music-search-app"]=this["webpackJsonpspotify-music-search-app"]||[]).push([[0],{79:function(t,e,r){},80:function(t,e,r){"use strict";r.r(e);var a=r(1),n=r(0),c=r.n(n),s=r(21),i=r.n(s),o=r(20),l=r(19),u=r(46),j=r(17),b=r(18),d="SET_ALBUMS",p="ADD_ALBUMS",m="SET_ARTISTS",h="ADD_ARTISTS",O="SET_PLAYLIST",f="ADD_PLAYLIST",x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=e.albums;switch(e.type){case d:return r;case p:return Object(b.a)(Object(b.a)({},t),{},{next:r.next,items:[].concat(Object(j.a)(t.items),Object(j.a)(r.items))});default:return t}},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=e.artists;switch(e.type){case h:return Object(b.a)(Object(b.a)({},t),{},{next:r.next,items:[].concat(Object(j.a)(t.items),Object(j.a)(r.items))});case m:return console.log(e),r;default:return t}},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=e.playlists;switch(e.type){case f:return Object(b.a)(Object(b.a)({},t),{},{next:r.next,items:[].concat(Object(j.a)(t.items),Object(j.a)(r))});case O:return r;default:return t}},g=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,_=Object(l.e)(Object(l.c)({albums:x,artists:v,playlists:y}),g(Object(l.a)(u.a))),E=r(23),S=r(6),T=r(83),w=function(){return Object(a.jsx)("h1",{className:"main-heading",children:"Spotify Music Search"})},C=function(t){var e=Object({NODE_ENV:"production",PUBLIC_URL:"/spotify-search",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORIZE_URL:"https://accounts.spotify.com/authorize",REACT_APP_CLIENT_ID:"1bd94ca87fcd4a288a742cedb84f46ca",REACT_APP_REDIRECT_URL:"https://jeremyirvine.github.io/spotify-search/redirect"}),r=e.REACT_APP_CLIENT_ID,n=e.REACT_APP_AUTHORIZE_URL,c=e.REACT_APP_REDIRECT_URL;return Object(a.jsxs)("div",{className:"login",children:[Object(a.jsx)(w,{}),Object(a.jsx)(T.a,{variant:"info",type:"submit",onClick:function(){window.location="".concat(n,"?client_id=").concat(r,"&redirect_uri=").concat(c,"&response_type=token&show_dialog=true")},children:"Login to Spotify"})]})},k=r(8),A=r.n(k),N=r(15),L=r(26),R=r.n(L),I=function(){try{var t=JSON.parse(localStorage.getItem("params"));t&&(R.a.defaults.headers.common.Authorization="Bearer ".concat(t.access_token))}catch(e){console.log("Error setting auth",e)}},P=function(t){return Object(n.useEffect)((function(){t.setExpiryTime;var e=t.history,r=t.location;try{if(A.a.isEmpty(r.hash))return e.push("/dashboard");var a=r.hash.slice(1).split("&").reduce((function(t,e){var r=e.split("="),a=Object(N.a)(r,2),n=a[0],c=a[1];return t[n]=c,t}),{}),n=(new Date).getTime()+1e3*a.expires_in;localStorage.setItem("params",JSON.stringify(a)),localStorage.setItem("expiry_time",n),e.push("/dashboard")}catch(c){e.push("/")}}),[]),null},D=r(7),U=r.n(D),B=r(16),F=function(){var t=Object(B.a)(U.a.mark((function t(e,r){var a;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I(),t.next=3,R.a.get(e,r).catch((function(t){var e;401===(null===t||void 0===t||null===(e=t.response)||void 0===e?void 0:e.status)&&(window.location.href="/")}));case 3:return a=t.sent,t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),M=function(t){return{type:d,albums:t}},H=function(t){return{type:m,artists:t}},J=function(t){return{type:O,playlists:t}},K=function(t){return function(){var e=Object(B.a)(U.a.mark((function e(r){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t);case 3:return a=e.sent,e.abrupt("return",r((n=a.albums,{type:p,albums:n})));case 7:e.prev=7,e.t0=e.catch(0),console.log("error",e.t0);case 10:case"end":return e.stop()}var n}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},W=function(t){return function(){var e=Object(B.a)(U.a.mark((function e(r){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t);case 3:return a=e.sent,e.abrupt("return",r((n=a.artists,{type:h,artists:n})));case 7:e.prev=7,e.t0=e.catch(0),console.log("error",e.t0);case 10:case"end":return e.stop()}var n}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},q=function(t){return function(){var e=Object(B.a)(U.a.mark((function e(r){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t);case 3:return a=e.sent,e.abrupt("return",r((n=a.playlists,{type:f,playlists:n})));case 7:e.prev=7,e.t0=e.catch(0),console.log("error",e.t0);case 10:case"end":return e.stop()}var n}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},z=r(81),G=function(t){var e=Object(n.useState)(""),r=Object(N.a)(e,2),c=r[0],s=r[1],i=Object(n.useState)(""),o=Object(N.a)(i,2),l=(o[0],o[1]);return Object(a.jsx)("div",{children:Object(a.jsxs)(z.a,{onSubmit:function(e){e.preventDefault(),""!==c.trim()?(l(""),t.handleSearch(c)):l("Please enter a search term.")},children:[Object(a.jsxs)(z.a.Group,{controlId:"formBasicEmail",children:[Object(a.jsx)(z.a.Label,{children:"Enter search term"}),Object(a.jsx)(z.a.Control,{type:"search",name:"searchTerm",value:c,placeholder:"Search for album, artist, or playlist",onChange:function(t){s(t.target.value)},autoComplete:"off"})]}),Object(a.jsx)(T.a,{variant:"info",type:"submit",children:"Search"})]})})},V=r(82),X=r.p+"static/media/music.b2fe7d4d.jpeg",Y=function(t){var e=t.albums;return Object(a.jsx)(a.Fragment,{children:Object.keys(e).length>0&&Object(a.jsx)("div",{className:"albums",children:e.items.map((function(t,e){return Object(a.jsx)(c.a.Fragment,{children:Object(a.jsxs)(V.a,{style:{width:"18rem"},children:[Object(a.jsx)("a",{target:"_blank",href:t.external_urls.spotify,rel:"noopener noreferrer",className:"card-image-link",children:A.a.isEmpty(t.images)?Object(a.jsx)("img",{src:X,alt:""}):Object(a.jsx)(V.a.Img,{variant:"top",src:t.images[0].url,alt:""})}),Object(a.jsxs)(V.a.Body,{children:[Object(a.jsx)(V.a.Title,{children:t.name}),Object(a.jsx)(V.a.Text,{children:Object(a.jsx)("small",{children:t.artists.map((function(t){return t.name})).join(", ")})})]})]})},e)}))})})},Z=function(t){var e=t.artists;return Object(a.jsx)(a.Fragment,{children:Object.keys(e).length>0&&Object(a.jsx)("div",{className:"artists",children:e.items.map((function(t,e){return Object(a.jsx)(c.a.Fragment,{children:Object(a.jsxs)(V.a,{style:{width:"18rem"},children:[Object(a.jsx)("a",{target:"_blank",href:t.external_urls.spotify,rel:"noopener noreferrer",className:"card-image-link",children:A.a.isEmpty(t.images)?Object(a.jsx)("img",{src:X,alt:""}):Object(a.jsx)(V.a.Img,{variant:"top",src:t.images[0].url,alt:""})}),Object(a.jsx)(V.a.Body,{children:Object(a.jsx)(V.a.Title,{children:t.name})})]})},e)}))})})},Q=function(t){var e=t.playlist;return Object(a.jsx)("div",{children:Object.keys(e).length>0&&Object(a.jsx)("div",{className:"playlist",children:e.items.map((function(t,e){return Object(a.jsx)(c.a.Fragment,{children:Object(a.jsxs)(V.a,{style:{width:"18rem"},children:[Object(a.jsx)("a",{target:"_blank",href:t.external_urls.spotify,rel:"noopener noreferrer",className:"card-image-link",children:A.a.isEmpty(t.images)?Object(a.jsx)("img",{src:X,alt:""}):Object(a.jsx)(V.a.Img,{variant:"top",src:t.images[0].url,alt:""})}),Object(a.jsxs)(V.a.Body,{children:[Object(a.jsx)(V.a.Title,{children:t.name}),Object(a.jsx)(V.a.Text,{children:Object(a.jsxs)("small",{children:["By ",t.owner.display_name]})})]})]})},e)}))})})},$=function(t){var e=t.result,r=t.setCategory,n=t.selectedCategory,c=t.loadMore,s=e.albums,i=e.artists,o=e.playlists;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"search-buttons",children:[!A.a.isEmpty(null===s||void 0===s?void 0:s.items)&&Object(a.jsx)("button",{className:"".concat("albums"===n?"btn active":"btn"),onClick:function(){return r("albums")},children:"Albums"}),!A.a.isEmpty(null===i||void 0===i?void 0:i.items)&&Object(a.jsx)("button",{className:"".concat("artists"===n?"btn active":"btn"),onClick:function(){return r("artists")},children:"Artists"}),!A.a.isEmpty(null===o||void 0===o?void 0:o.items)&&Object(a.jsx)("button",{className:"".concat("playlists"===n?"btn active":"btn"),onClick:function(){return r("playlists")},children:"Playlists"})]}),Object(a.jsx)("div",{className:"".concat("albums"===n?"":"hide"),children:s&&Object(a.jsx)(Y,{albums:s})}),Object(a.jsx)("div",{className:"".concat("artists"===n?"":"hide"),children:i&&Object(a.jsx)(Z,{artists:i})}),Object(a.jsx)("div",{className:"".concat("playlists"===n?"":"hide"),children:o&&Object(a.jsx)(Q,{playlist:o})}),!A.a.isEmpty(e[n])&&!A.a.isEmpty(e[n].next)&&Object(a.jsx)("div",{className:"load-more",onClick:function(){return c(n)},children:Object(a.jsx)(T.a,{variant:"info",type:"button",children:"Load More"})})]})},tt=function(t){var e=Object(n.useState)(document.createElement("div")),r=Object(N.a)(e,1)[0],a=document.querySelector("#loader");return Object(n.useEffect)((function(){a.appendChild(r).classList.add("message")}),[a,r]),Object(n.useEffect)((function(){t.show?(a.classList.remove("hide"),document.body.classList.add("loader-open")):(a.classList.add("hide"),document.body.classList.remove("loader-open"))}),[a,t.show]),i.a.createPortal(t.children,r)},et=function(t){var e=Object(n.useState)(!1),r=Object(N.a)(e,2),c=r[0],s=r[1],i=Object(n.useState)("albums"),l=Object(N.a)(i,2),u=l[0],j=l[1],b=Object(o.b)(),d=Object(o.c)((function(t){return t.albums})),p=Object(o.c)((function(t){return t.artists})),m=Object(o.c)((function(t){return t.playlists})),h={albums:d,artists:p,playlists:m},O=function(){var t=Object(B.a)(U.a.mark((function t(e){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s(!0),t.t0=e,t.next="albums"===t.t0?4:"artists"===t.t0?7:"playlists"===t.t0?10:13;break;case 4:return t.next=6,b(K(d.next));case 6:return t.abrupt("break",13);case 7:return t.next=9,b(W(p.next));case 9:return t.abrupt("break",13);case 10:return t.next=12,b(q(m.next));case 12:return t.abrupt("break",13);case 13:s(!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)(w,{}),Object(a.jsx)(G,{handleSearch:function(t){s(!0),b(function(t){return function(){var e=Object(B.a)(U.a.mark((function e(r){var a,n,c,s,i;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="https://api.spotify.com/v1/search?query=".concat(encodeURIComponent(t),"&type=album,playlist,artist"),e.next=4,F(a);case 4:return n=e.sent,c=n.albums,s=n.artists,i=n.playlists,r(M(c)),r(H(s)),e.abrupt("return",r(J(i)));case 11:e.prev=11,e.t0=e.catch(0),console.log("error",e.t0.code);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()}(t)).then((function(){j("albums"),s(!1)}))}}),Object(a.jsx)(tt,{show:c,children:"Loading..."}),Object(a.jsx)($,{result:h,setCategory:function(t){j(t)},selectedCategory:u,loadMore:O})]})},rt=function(){return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(w,{}),"Page not found. Go to ",Object(a.jsx)(E.b,{to:"/dashboard",children:"Home Page"})]})},at=function(){return Object(a.jsx)(E.a,{basename:"/spotify-search",children:Object(a.jsx)("div",{className:"main",children:Object(a.jsxs)(S.c,{children:[Object(a.jsx)(S.a,{path:"/",component:C,exact:!0}),Object(a.jsx)(S.a,{path:"/redirect",component:P}),Object(a.jsx)(S.a,{path:"/dashboard",component:et}),Object(a.jsx)(S.a,{component:rt})]})})})};r(78),r(79);i.a.render(Object(a.jsx)(o.a,{store:_,children:Object(a.jsx)(at,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.d8cdda7d.chunk.js.map